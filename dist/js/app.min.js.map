{"version":3,"file":"app.min.js","sources":["app.js"],"sourcesContent":["var imagesObject = function () {\n  var imageData, // global object\n    modalImg = document.querySelector(\".modal__img\"),\n    preloadImages = new Array(),\n    target = { location: 0, category: 0, data: false }; // target variable to store data for manipulation\n  function init() {\n    getImagesData(\"../js/app.json\", gridLoop);\n  }\n\n  /**\n   * Refrence - https://www.w3schools.com/js/tryit.asp?filename=tryjson_http\n   * Ajax call to get data from json\n   */\n  function getImagesData(url, callback) {\n    var xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState == 4 && xhr.status == 200) {\n        var imagesLists = JSON.parse(xhr.responseText);\n        callback(imagesLists.imagesJson);\n      }\n    };\n    xhr.open(\"GET\", url, true);\n    xhr.send();\n  }\n\n  // Ajax callback function\n  function gridLoop(imagesLists) {\n    imageData = imagesLists;\n    var filterUniqueValues = getUniqueArray(imagesLists);\n    // create the filter buttons with the unique values returned from getUniqueArray\n    createFilterButtons(filterUniqueValues.location, \"location\");\n    createFilterButtons(filterUniqueValues.category, \"category\");\n    addEvent(); // Add Click event to filter btns\n    createGrid(imageData);\n  }\n\n  // Create Buttons from array list\n  function createFilterButtons(loopOver, filterType) {\n    if (loopOver.length > 0) {\n      var sel = document.getElementById(filterType + \"-filter\");\n      for (var i = 0; i < loopOver.length; i++) {\n        var opt = document.createElement(\"button\");\n        opt.appendChild(document.createTextNode(loopOver[i]));\n        opt.className = \"btn filter-btn\";\n        opt.setAttribute(\"data-filter\", loopOver[i]);\n        opt.setAttribute(\"data-filter-type\", filterType);\n        sel.appendChild(opt);\n      }\n    }\n  }\n\n  // get unique values from the json array\n  function getUniqueArray(imagesLists) {\n    var location = {},\n      category = {};\n    // get only json values.\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Object/values\n    Object.values(imagesLists).forEach(function (element) {\n      // if unique value save to array with key as name and value as 1\n      if (!(element.location in location)) {\n        location[element.location] = 1;\n      }\n      if (!(element.category in location)) {\n        category[element.category] = 1;\n      }\n    });\n    // get the keys in the newly created object\n    location = Object.keys(location);\n    category = Object.keys(category);\n    return {\n      location: location,\n      category: category,\n    };\n  }\n\n  function addEvent() {\n    var fillterDivRef = document.querySelector(\".filter\");\n    fillterDivRef.addEventListener(\"click\", function (e) {\n      var currElem = e.target;\n      addActiveClass(currElem);\n      if (currElem.classList.contains(\"filter-btn\")) {\n        // get data attributes for the clicked element\n        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLOrForeignElement/dataset\n        filterJson(currElem.dataset[\"filterType\"], currElem.dataset[\"filter\"]);\n      }\n    });\n  }\n\n  function filterJson(type, value) {\n    target[type] = value;\n\n    // making the copy of imageData\n    target.data = imageData.slice();\n    target.data = target.data.filter(function (elem) {\n      // console.log(target);\n      // if both category and location is selected\n      if (target.category && target.location) {\n        return (\n          elem.category === target.category && elem.location === target.location\n        );\n      } else {\n        // if any one is selected\n        return elem[type] === value;\n      }\n    });\n    // console.log(target.data);\n    createGrid(target.data);\n  }\n\n  function addActiveClass(currElem) {\n    var allBtns = getSiblings(currElem);\n    for (var i = 0; i < allBtns.length; i++) {\n      if (allBtns[i].classList.contains(\"active\")) {\n        allBtns[i].classList.remove(\"active\");\n      }\n    }\n    currElem.classList.add(\"active\");\n  }\n\n  // get all sibling buttons\n  function getSiblings(elem) {\n    var siblings = [],\n      sibling = elem.parentNode.firstChild;\n    // Loop through each sibling and push to the array\n    while (sibling) {\n      // If the node is an element node, the nodeType property will return 1.\n      if (sibling.nodeType === 1) {\n        siblings.push(sibling);\n      }\n      sibling = sibling.nextSibling;\n    }\n    return siblings;\n  }\n\n  // create grid layout\n  function createGrid(imagesLists) {\n    var gridRow = document.querySelector(\".grid-row\");\n    gridRow.innerHTML = \"\";\n    imagesLists.forEach(function (imagesList, i) {\n      var col = document.createElement(\"div\");\n      col.classList.add(\"col\");\n\n      var anchor = document.createElement(\"a\");\n      anchor.href = \"#\";\n      anchor.onclick = function () {\n        app.openModal(this, imagesLists);\n      };\n      anchor.classList.add(\"open-modal\");\n      anchor.setAttribute(\"data-zoom\", imagesList.zoomsrc);\n      anchor.setAttribute(\"data-index\", i);\n      col.appendChild(anchor);\n\n      anchor.innerHTML =\n        '<img src=\"' +\n        imagesList.src +\n        '\" />' +\n        '<div class=\"img-info\">' +\n        '<p id=\"image-name\">Image Name : <span>' +\n        imagesList.title +\n        \"</span></p>\" +\n        '<p id=\"photographer\">Photographer : <span>' +\n        imagesList.photographer +\n        \"</span></p>\" +\n        '<p id=\"date\">Date : <span>' +\n        imagesList.date +\n        \"</span></p>\" +\n        '<p id=\"location\">Location : <span>' +\n        imagesList.location +\n        \"</span></p>\" +\n        '<p id=\"category\">Category : <span>' +\n        imagesList.category +\n        \"</span></p>\" +\n        \"</div>\";\n      gridRow.appendChild(col);\n\n      // Preloading of Large Images\n      preloadImages[i] = new Image();\n      preloadImages[i].src = imagesList.zoomsrc;\n    });\n\n    showSelectedValues(target);\n  }\n\n  function showSelectedValues(selectedValues) {\n    console.log(selectedValues[\"data\"].length == 0);\n    var selectedDiv = document.querySelector(\".selected-values\");\n    if (selectedValues[\"data\"].length == 0) {\n      selectedDiv.innerHTML = \"\";\n      var para = document.createElement(\"p\");\n      para.appendChild(\n        document.createTextNode(\n          \"No match found, Please try another combination\"\n        )\n      );\n      selectedDiv.appendChild(para);\n    } else {\n      if (selectedValues[\"data\"]) {\n        var selectedCat =\n          selectedValues[\"category\"] == 0 ? \" \" : selectedValues[\"category\"];\n        var selectedloc =\n          selectedValues[\"location\"] == 0 ? \" \" : selectedValues[\"location\"];\n        selectedDiv.innerHTML = \"\";\n        var para = document.createElement(\"p\");\n\n        para.appendChild(\n          document.createTextNode(selectedloc + \" , \" + selectedCat)\n        );\n        selectedDiv.appendChild(para);\n      }\n    }\n  }\n\n  // select dropdown filters\n  function filterData(filterBy) {\n    target.data = target.data || imageData.slice();\n    // console.log(target);\n    switch (filterBy) {\n      case \"ascending\":\n        target.data.sort(ascending);\n        break;\n      case \"descending\":\n        target.data.sort(descending);\n        break;\n      case \"alphabetically\":\n        target.data.sort(alphabetically);\n        break;\n      case \"reverse\":\n        target.data.sort(reverse);\n        break;\n      default:\n      // code block\n    }\n    createGrid(target.data);\n  }\n  function ascending(a, b) {\n    return new Date(a.date).getTime() - new Date(b.date).getTime();\n  }\n  function descending(a, b) {\n    return new Date(b.date).getTime() - new Date(a.date).getTime();\n  }\n  function alphabetically(a, b) {\n    return a.title.localeCompare(b.title);\n  }\n  function reverse(a, b) {\n    return b.title.localeCompare(a.title);\n  }\n  function showAll(e) {\n    var allBtns = document.querySelectorAll(\".btn\");\n    for (var i = 0; i < allBtns.length; i++) {\n      if (allBtns[i].classList.contains(\"active\")) {\n        allBtns[i].classList.remove(\"active\");\n      }\n    }\n    target.category = target.location = 0;\n    target.data = imageData;\n    createGrid(imageData);\n  }\n\n  /**\n   * Modal Js\n   */\n  var currentIndex;\n  function openModal(currentElement, currentImagesList) {\n    var currentZoomImage = currentElement.getAttribute(\"data-zoom\");\n    currentIndex = currentElement.getAttribute(\"data-index\");\n    modalImg.src = currentZoomImage;\n    document.getElementById(\"modal\").style.display = \"block\";\n\n    document.querySelector(\".prev\").addEventListener(\n      \"click\",\n      function () {\n        navigateImage(currentImagesList, \"prev\");\n      },\n      false\n    );\n\n    document.querySelector(\".next\").addEventListener(\n      \"click\",\n      function () {\n        navigateImage(currentImagesList, \"next\");\n      },\n      false\n    );\n\n    // close modal if clicked anywhere else\n    modalImg.parentElement.parentElement.addEventListener(\"click\", function (\n      e\n    ) {\n      if (e.target == document.getElementById(\"modal\")) {\n        closeModal();\n      }\n    });\n  }\n\n  // close Modal\n  function closeModal() {\n    document.getElementById(\"modal\").style.display = \"none\";\n  }\n\n  // Prev Next Navigation\n  function navigateImage(currentImagesLists, direction) {\n    var nextIndex;\n    if (direction == \"next\") {\n      nextIndex =\n        currentIndex < currentImagesLists.length - 1 ? +currentIndex + 1 : 0;\n    } else {\n      nextIndex =\n        currentIndex > 0 ? +currentIndex - 1 : currentImagesLists.length - 1;\n    }\n\n    console.log(currentIndex, nextIndex, currentImagesLists);\n    currentIndex = nextIndex;\n    modalImg.src = currentImagesLists[currentIndex].zoomsrc;\n    // console.log(nextIndex, currentIndex);\n  }\n\n  // Keyboard Navigation for Slider, close on esc\n  document.body.addEventListener(\n    \"keydown\",\n    function (e) {\n      var code = e.keyCode;\n      var evt = new Event(\"click\");\n\n      if (code == 39) {\n        document.querySelector(\".next\").dispatchEvent(evt);\n      }\n      if (code == 37) {\n        document.querySelector(\".prev\").dispatchEvent(evt);\n      }\n      if (code == 27) {\n        closeModal();\n      }\n    },\n    false\n  );\n\n  return {\n    init: init,\n    filterData: filterData,\n    showAll: showAll,\n    openModal: openModal,\n    closeModal: closeModal,\n  };\n};\nvar app = imagesObject();\napp.init();\n"],"names":["imagesObject","imageData","currentIndex","modalImg","document","querySelector","preloadImages","Array","target","location","category","data","gridLoop","imagesLists","filterUniqueValues","Object","values","forEach","element","keys","createFilterButtons","addEventListener","e","type","value","currElem","allBtns","elem","siblings","sibling","parentNode","firstChild","nodeType","push","nextSibling","getSiblings","i","length","classList","contains","remove","add","addActiveClass","dataset","slice","filter","createGrid","loopOver","filterType","sel","getElementById","opt","createElement","appendChild","createTextNode","className","setAttribute","gridRow","innerHTML","imagesList","col","anchor","href","onclick","app","openModal","this","zoomsrc","src","title","photographer","date","Image","selectedValues","console","log","selectedDiv","selectedCat","selectedloc","para","showSelectedValues","ascending","a","b","Date","getTime","descending","alphabetically","localeCompare","reverse","closeModal","style","display","navigateImage","currentImagesLists","direction","nextIndex","body","code","keyCode","evt","Event","dispatchEvent","init","url","callback","xhr","XMLHttpRequest","onreadystatechange","readyState","status","JSON","parse","responseText","imagesJson","open","send","filterData","filterBy","sort","showAll","querySelectorAll","currentElement","currentImagesList","currentZoomImage","getAttribute","parentElement"],"mappings":"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"}